if(window.tf_app={call:function(){this.protocol="http:"===document.location.protocol?"http:":"https:",this.src=document.currentScript.src,this.data=this.getParameterByName("data"),this.artist=this.getParameterByName("artist")||"",this.song=this.getParameterByName("song")||"",this.album=this.getParameterByName("album")||"",this.soundtrack=this.getParameterByName("soundtrack")||!1,this.data?(this.div_id=document.currentScript.parentNode.getAttribute("id"),this.div_id?(url=this.getAdUrl(),this.makeRequest(url)):console.error("[Tonefuse] NO DIV ID FOUND")):console.error("[Tonefuse] NO DATA FOUND")},makeRequest:function(t){let e=new XMLHttpRequest;e.addEventListener("load",this.displayCreative.bind(this)),e.open("GET",t),e.send()},pixel:function(t){var e=document.createElement("img");e.src=t,e.style.width="1px",e.style.height="1px",e.style.borderStyle="none",e.style.position="absolute",e.style.display="none",document.body.appendChild(e)},getAdUrl:function(){var t=this.protocol+"//"+this.get_host()+"/ads/tf.php?",e={data:this.data,artist:this.artist,song:this.song,album:this.album,alb_is:this.soundtrack,referer:this.url(),t:+new Date};return t+this.buildQuery(e)},buildQuery:function(t){var e=[];for(var i in t)e.push(i+"="+encodeURIComponent(t[i]));return e.join("&")},url:function(){var t="";if(top===self)t=location.href.replace(location.hash,"");else if(window.cf_domain)t=cf_domain;else try{t=top.location.href.replace(top.location.hash,"")}catch(e){t=location.href.replace(location.hash,"")}return t||(t=""),t.substring(0,512)},displayCreative:function(t){let e=this;if(t){let i=JSON.parse(t.target.response);if(i.error)return console.error(i.error),!1;e.include("https://cdnjs.cloudflare.com/ajax/libs/postscribe/2.0.8/postscribe.min.js",function(){postscribe("#"+e.div_id,i.html),e.pixel(i.impPixel),setTimeout(function(){for(var t,i=document.getElementsByClassName("tf_parent"),s=0;s<i.length;s++)"true"!==i[t=s].getAttribute("tf_listener")&&(i[t].setAttribute("tf_listener",!0),i[t].addEventListener("click",e.dropdown),e.clearDisplayValues(i[t]))},500)})}},clearDisplayValues:function(t){t.style.display="",t.nextSibling.lastChild.style.display=""},dropdown:function(){let t=this.nextSibling;t.style.display="",t.classList.contains("tf_dropdown")?t.classList.remove("tf_dropdown"):t.classList.add("tf_dropdown")},getParameterByName:function(t){var e=t.replace(/[\[\]]/g,"\\$&"),i=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(this.src);return i&&i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):""},get_host:function(){return window.cf_hostname?cf_hostname:location.host.indexOf(".local")>-1?"srv.tonemedia.local":location.host.indexOf("staging.")>-1?"srv.staging.tonemedia.com":"srv.tonemedia.com"},include:function(t,e,i){var s=document.getElementsByTagName("script")[0],n=document.createElement("script");n.async=!0,n.src=("http"==t.substring(0,4)?"":this.protocol)+t,"function"==typeof e&&(i=e,e=!1),e&&(n.id=e),i&&(n.readyState?n.onreadystatechange=function(){"loaded"!=n.readyState&&"complete"!=n.readyState||(n.onreadystatechange=null,i())}:n.onload=i),s.parentNode.insertBefore(n,s)}},tf_app.call(),!document.currentScript){let t=tf_app.get_host();tf_app.include("http://"+t+"/showads/js/polyfills/currentScript.min.js")}